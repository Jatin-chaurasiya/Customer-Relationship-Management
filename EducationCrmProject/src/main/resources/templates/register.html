<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CampusConnect Register</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
	crossorigin="anonymous">
</head>

<body>
	<!--HEADER START-->
	<div th:replace="~{fragments/header :: header}"></div>
	<!-- Header Ends -->

	<!--Main  section Start-->
	<main class="container-fluid" style="min-height: 550px;">
		<!--content-->
		<section class="container py-5 bg-light">
			<h3 class="text-center mb-5">Register Here</h3>

			<!--Courses-->
			<div class="row justify-content-center">

				<!--Register card start-->
				<div class="col-lg-6 col-md-6">
					<form th:action="@{/regForm}" method="post"
						onsubmit="return validateForm()" th:object="${user}">
						<div class="card shadow p-5">

							<!-- Success Message -->
							<div th:if="${successMsg}" class="mb-3 alert alert-success"
								role="alert">
								<span th:text="${successMsg}"></span>
							</div>
]
							<div class="mb-3">
								<label class="form-label">Name :</label> <input type="text"
									class="form-control" name="name" placeholder="Enter your name"
									th:field="*{name}" required />
								<div class="text-danger" th:if="${#fields.hasErrors('name')}"
									th:errors="*{name}"></div>
							</div>
							<div class="mb-3">
								<label class="form-label">Email Id :</label> <input type="email"
									class="form-control" name="email"
									placeholder="Enter your Email Id" th:field="*{email}" required />
								<div class="text-danger" th:if="${#fields.hasErrors('email')}"
									th:errors="*{email}"></div>
								<div id="emailHelp" class="form-text">We'll never share
									your email with anyone else.</div>
							</div>
							<div class="mb-3">
								<label class="form-label">Password :</label> <input
									type="password" class="form-control" name="password"
									placeholder="Enter your Password" th:field="*{password}"
									required />
								<div class="text-danger"
									th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
							</div>
							<div class="mb-3">
								<label class="form-label">Phone no. :</label> <input type="text"
									class="form-control" name="phoneno"
									placeholder="Enter your Phone no." th:field="*{phoneno}"
									required />
								<div class="text-danger" th:if="${#fields.hasErrors('phoneno')}"
									th:errors="*{phoneno}"></div>
							</div>
							<div class="mb-3">
								<label class="form-label">City :</label> <input type="text"
									class="form-control" name="city" placeholder="Enter your City"
									th:field="*{city}" required />
								<div class="text-danger" th:if="${#fields.hasErrors('city')}"
									th:errors="*{city}"></div>
							</div>
							<button type="submit" class="btn btn-primary">Register</button>
						</div>
					</form>
				</div>
				<!-- Register card ends -->
			</div>
		</section>
	</main>
	<!--Main section ends-->

	<!--Footer starts-->
	<div th:replace="~{fragments/footer :: footer}"></div>
	<!--Footer ends-->

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
		crossorigin="anonymous"></script>

	<script type="text/javascript">
		function validateForm() {
			var name = document.forms[0]["name"].value;
			var namePattern = /^[a-zA-Z ]{5,25}$/;
			var email = document.forms[0]["email"].value;
			var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
			var password = document.forms[0]["password"].value;
			var passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
			var phoneno = document.forms[0]["phoneno"].value;
			var phonenoPattern = /^[6-9]\d{9}$/;
			var city = document.forms[0]["city"].value;
			var cityPattern = /^[A-Za-z ]+$/;


			if (!namePattern.test(name)) {
				alert("Please enter a valid name (5-25 characters, letters and spaces only).");
				return false;
			} else if (!emailPattern.test(email)) {
				alert("Please enter a valid email address.");
				return false;
			} else if (!passwordPattern.test(password)) {
				alert("Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character.");
				return false;
			} else if (!phonenoPattern.test(phoneno)) {
				alert("Please enter a valid phone number (10 digits, starting with 6-9).");
				return false;
			} else if (!cityPattern.test(city)) {
				alert("Please enter a valid city name (letters and spaces only).");
				return false;
			}
			return true; // Form is valid
		}
	</script>
</body>
</html>
