<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>User Courses - Admin Panel</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
	<link rel="stylesheet" th:href="@{/css/admin-layout.css}" />
</head>

<body>
	<!-- Sidebar -->
	<div th:replace="~{fragments/admin-sidebar :: admin-sidebar}"></div>

	<!-- Main Content -->
	<div class="content">
		<div class="container-fluid">
			<!-- Header with Back Button -->
			<div class="d-flex justify-content-between align-items-center mb-4">
				<div>
					<h2>
						<i class="bi bi-book-fill text-primary"></i> 
						User Courses
					</h2>
					<p class="text-muted mb-0">
						Courses purchased by <strong th:text="${custName}">Customer</strong>
					</p>
				</div>
				<a href="/customerManagement" class="btn btn-secondary">
					<i class="bi bi-arrow-left"></i> Back to Customers
				</a>
			</div>

			<!-- Courses Section -->
			<section class="mt-4">
				<div class="card shadow">
					<div class="card-body p-0">
						<!-- Empty State -->
						<div th:if="${custCoursesList == null || custCoursesList.isEmpty()}" 
						     class="text-center py-5 px-3">
							<i class="bi bi-cart-x" style="font-size: 4rem; color: #ccc;"></i>
							<h4 class="mt-3 text-muted">No Courses Purchased</h4>
							<p class="text-muted">
								<strong th:text="${custName}">This customer</strong> hasn't purchased any courses yet
							</p>
							<a href="/customerManagement" class="btn btn-primary mt-2">
								<i class="bi bi-arrow-left"></i> Back to Customers
							</a>
						</div>

						<!-- Courses Table -->
						<div th:if="${custCoursesList != null && !custCoursesList.isEmpty()}">
							<!-- Table Header Info -->
							<div class="p-3 bg-light border-bottom">
								<h5 class="mb-0">
									<i class="bi bi-bag-check-fill text-success"></i>
									Purchased Courses by <span class="text-primary" th:text="${custName}">Customer</span>
								</h5>
								<small class="text-muted">
									Total: <strong th:text="${custCoursesList.size()}">0</strong> course(s)
								</small>
							</div>

							<div class="table-responsive">
								<table class="table table-striped table-hover table-bordered mb-0">
									<thead class="table-dark">
										<tr>
											<th scope="col">Course Image</th>
											<th scope="col">Course Name</th>
											<th scope="col">Amount</th>
											<th scope="col">Purchase Date</th>
											<th scope="col">Order ID</th>
											<th scope="col">Payment ID</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="custCourse : ${custCoursesList}">
											<!-- Course Image -->
											<td>
												<img th:if="${custCourse[0] != null && !custCourse[0].toString().isEmpty()}" 
												     th:src="@{${custCourse[0]}}" 
												     th:alt="${custCourse[1] != null ? custCourse[1] : 'Course Image'}"
												     class="img-thumbnail"
												     width="120" 
												     height="80"
												     style="object-fit: cover;" />
												<span th:unless="${custCourse[0] != null && !custCourse[0].toString().isEmpty()}" 
												      class="text-muted">
													<i class="bi bi-image"></i> No Image
												</span>
											</td>
											
											<!-- Course Name -->
											<td>
												<strong th:text="${custCourse[1] != null ? custCourse[1] : '-'}">Course Name</strong>
											</td>
											
											<!-- Amount -->
											<td>
												<span class="badge bg-success" 
												      th:text="${custCourse[2] != null ? '₹' + custCourse[2] : '-'}">
													₹0
												</span>
											</td>
											
											<!-- Purchase Date -->
											<td>
												<i class="bi bi-calendar-event text-primary"></i>
												<span th:text="${custCourse[3] != null ? custCourse[3] : '-'}">Date</span>
											</td>
											
											<!-- Order ID -->
											<td>
												<small class="text-muted" th:text="${custCourse[4] != null ? custCourse[4] : '-'}">
													Order ID
												</small>
											</td>
											
											<!-- Payment ID -->
											<td>
												<small class="text-muted" th:text="${custCourse[5] != null ? custCourse[5] : '-'}">
													Payment ID
												</small>
											</td>
										</tr>
									</tbody>
								</table>
							</div>

							<!-- Summary Footer -->
							<div class="p-3 bg-light border-top">
								<div class="row">
									<div class="col-md-6">
										<p class="mb-0">
											<strong>Customer:</strong> 
											<span th:text="${custName}">Name</span>
										</p>
									</div>
									<div class="col-md-6 text-end">
										<p class="mb-0">
											<strong>Total Courses:</strong> 
											<span class="badge bg-primary" th:text="${custCoursesList.size()}">0</span>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>