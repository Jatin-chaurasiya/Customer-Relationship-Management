<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Profile</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<link rel="stylesheet" th:href="@{/css/admin-layout.css}" />
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>

<body>
	<!--Sidebar-->
	<div th:replace="~{fragments/admin-sidebar :: admin-sidebar}"></div>
	<!--End of Sidebar-->

	<!--Content-->
	<section class="adminContainer">
		<div class="content">
			<h2>Admin Details</h2>
			<p>Dashboard contains the different graphs and charts showing the
				different Details..</p>


			<section class="container py-5">
				<div class="row justify-content-center">

					<div class="col-lg-6">
						<div class="card shadow p-3">
							<h4 class="text-center">Todays Sale Graph</h4>
							<div id="myPlot"></div>
						</div>
					</div>

					<div class="col-lg-6" style="max-height: 50%">
						<div class="card shadow p-3">
							<h4 class="text-center">Courses Sold Graph</h4>
							<div style="height: 440px">
								<canvas id="myPieChart"></canvas>
							</div>
						</div>
					</div>

				</div>
			</section>

			<section class="container py-5">
				<div class="row justify-content-center">

					<div class="col-lg-12">
						<div class="card shadow p-3">
							<h4 class="text-center">Courses Sold Per Day Graph</h4>
							<canvas class="mt-3" id="myChart"></canvas>
						</div>
					</div>

				</div>
			</section>

			<section class="mt-5">
				<div class="row justify-content-center"></div>
			</section>
		</div>
	</section>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
		crossorigin="anonymous"></script>

	<script th:inline="javascript">
		function graphOne()
		{
			const xArray = /*[[ ${date11} ]]*/ [];
			const yArray = /*[[ ${totalAmount11} ]]*/ [];
			
			const data = [{
			  x:xArray,
			  y:yArray,
			  type:"bar"
			}];
			
			const layout = {
								displayModeBar: false
							};
			
			Plotly.newPlot("myPlot", data, layout, {displayModeBar: false});
		}
		graphOne();
		
		
		function graphTwo()
		{
			var xValues = /*[[ ${coursename1} ]]*/ [];
			var yValues = /*[[ ${coursecount1} ]]*/ [];
			
			function getRandomColor()
			{
				var letters = "0123456789ABCDEF";
				var color = "#";
				for(var i=1; i<=6; i++)
				{
					var randomIndex = Math.floor(Math.random()*16);	// 0 to 15
					var randomCharacter = letters[randomIndex];
					color = color+randomCharacter;
				}
				return color;
			}
			
			var barColors = xValues.map(() => getRandomColor());
			
			new Chart("myPieChart", {
			  type: "pie",
			  data: {
			    labels: xValues,
			    datasets: [{
			      backgroundColor: barColors,
			      data: yValues
			    }]
			  },
			  options: {
				  responsive: true,
				  maintainAspectRatio: false,
			    title: {
			      display: true,
			    }
			  }
			});
		}
		graphTwo();
		
		
		function graphThree()
		{
			const xValues = /*[[ ${dates1} ]]*/ [];
			const yValues = /*[[ ${counts1} ]]*/ [];
			
			var maxYValues = Math.max(...yValues)+2;
			
			new Chart("myChart", {
			  type: "line",
			  data: {
			    labels: xValues,
			    datasets: [{
			      fill: false,
			      lineTension: 0,
			      backgroundColor: "rgba(0,0,255,1.0)",
			      borderColor: "rgba(0,0,255,0.1)",
			      data: yValues
			    }]
			  },
			  options: {
			    legend: {display: false},
			    scales: {
			      yAxes: [{ticks: {min: 0, max:maxYValues}}],
			    }
			  }
			});
		}
		graphThree();
	</script>
	<script>
// Back button disable karne ke liye (optional)
window.history.pushState(null, null, window.location.href);
window.addEventListener('popstate', function() {
    window.history.pushState(null, null, window.location.href);
});
</script>


</body>
</html>
